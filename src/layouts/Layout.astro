---
import BaseHead from '../components/BaseHead.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

interface Props {
	title?: string;
	description?: string;
}

const { 
	title = SITE_TITLE,
	description = SITE_DESCRIPTION
} = Astro.props;
---

<!doctype html>
<html lang="es">
	<head>
		<BaseHead title={title} description={description} />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="icon" type="image/png" href="/img/favicon-96x96.png" />
		<meta name="generator" content={Astro.generator} />
		<style>
			/* Variables globales */
			:root {
				/* Transiciones */
				--transition-duration: 1.5s;
				--transition-timing: cubic-bezier(0.4, 0, 0.2, 1);
				
				/* Layout */
				--max-width: 1200px;
				--container-padding: 1rem;
				--accent: 136, 58, 234;
				--accent-light: 224, 204, 250;
				--accent-dark: 49, 10, 101;
				--accent-gradient: linear-gradient(45deg, rgb(var(--accent)), rgb(var(--accent-light)) 30%, white 60%);
			}

			/* Reset y estilos base */
			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
				-webkit-tap-highlight-color: transparent;
			}

			html {
				font-size: 16px;
				-webkit-text-size-adjust: 100%;
				-webkit-font-smoothing: antialiased;
				-moz-osx-font-smoothing: grayscale;
				scroll-behavior: smooth;
				height: 100%;
				font-family: system-ui, sans-serif;
				background: #f6f6f6;
				background-size: 224px;
			}

			body {
				margin: 0;
				padding: 0;
				overflow-x: hidden;
				width: 100%;
				min-height: 100vh;
				line-height: 1.5;
				text-rendering: optimizeLegibility;
				position: relative;
				height: 100%;
				background-color: #8B0000;
			}

			/* Preloader */
			#preloader {
				position: fixed;
				inset: 0;
				width: 100%;
				height: 100%;
				background: #000;
				display: flex;
				justify-content: center;
				align-items: center;
				z-index: 9999;
				opacity: 1;
				transition: opacity var(--transition-duration) var(--transition-timing);
			}

			#preloader.fade-out {
				opacity: 0;
				pointer-events: none;
			}

			#preloader img {
				width: min(90vw, 600px);
				height: auto;
				transition: all var(--transition-duration) var(--transition-timing);
				object-fit: contain;
				position: relative;
			}

			#preloader.fade-out img {
				transform: scale(0.5);
				opacity: 0;
			}

			/* Contenido principal */
			#content {
				opacity: 0;
				transition: opacity var(--transition-duration) var(--transition-timing);
				width: 100%;
				min-height: 100vh;
				display: flex;
				flex-direction: column;
				margin: 0 auto;
				max-width: var(--max-width);
				padding: 0 var(--container-padding);
				position: relative;
				z-index: 1;
			}

			#content::before {
				content: '';
				position: fixed;
				inset: 0;
				background: rgba(139, 0, 0, 0.85);
				backdrop-filter: blur(10px);
				z-index: -1;
			}

			#content.visible {
				opacity: 1;
			}

			.hidden {
				display: none !important;
			}

			/* Media Queries */
			@media screen and (max-width: 1199.98px) {
				:root {
					--max-width: 960px;
				}
			}

			@media screen and (max-width: 991.98px) {
				:root {
					--max-width: 720px;
				}
				html {
					font-size: 15px;
				}
			}

			@media screen and (max-width: 767.98px) {
				:root {
					--max-width: 540px;
					--container-padding: 0.75rem;
				}
				html {
					font-size: 14px;
				}
				#preloader img {
					width: 85vw;
				}
			}

			@media screen and (max-width: 575.98px) {
				:root {
					--max-width: 100%;
					--container-padding: 0.5rem;
				}
				html {
					font-size: 13px;
				}
				#preloader img {
					width: 80vw;
				}
			}

			@media screen and (max-width: 359.98px) {
				:root {
					--container-padding: 0.25rem;
				}
				html {
					font-size: 12px;
				}
				#preloader img {
					width: 75vw;
				}
			}

			/* Optimizaciones para tablets */
			@media screen and (min-width: 1024px) and (max-width: 1366px) {
				:root {
					--max-width: 90%;
				}
				#preloader img {
					width: min(70vw, 800px);
				}
			}

			@media screen and (min-width: 768px) and (max-width: 1023px) {
				:root {
					--max-width: 85%;
				}
				#preloader img {
					width: min(75vw, 700px);
				}
			}

			/* Ajustes para orientación landscape */
			@media screen and (orientation: landscape) and (max-height: 500px) {
				#preloader {
					position: fixed;
					height: 100vh;
				}
				#preloader img {
					width: 50vh;
					max-height: 80vh;
				}
			}

			/* Soporte para iOS */
			@supports (-webkit-touch-callout: none) {
				#preloader {
					position: fixed;
					height: -webkit-fill-available;
				}
			}
		</style>
	</head>
	<body>
		<slot name="preloader" />
		<div id="content" class="hidden">
			<slot />
		</div>
		<script>
			document.addEventListener('DOMContentLoaded', () => {
				const content = document.getElementById('content');
				if (!content) return;

				// Mostrar el contenido después de un breve retraso
				setTimeout(() => {
					content.classList.remove('hidden');
					content.classList.add('visible');
				}, 100);
			});
		</script>
	</body>
</html> 