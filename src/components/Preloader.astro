---
interface Props {
	imagePath?: string;
	altText?: string;
}

const { 
	imagePath = "/img/animacion.gif",
	altText = "logo animado"
} = Astro.props;
---

<div id="preloader" class="preloader">
	<div class="preloader__container">
		<img 
			src={imagePath} 
			alt={altText}
			class="preloader__image"
			width="300"
			height="300"
		/>
	</div>
</div>

<style>
	.preloader {
		position: fixed;
		inset: 0;
		width: 100%;
		height: 100%;
		background: #000000;
		display: flex;
		justify-content: center;
		align-items: center;
		z-index: 9999;
		opacity: 1;
		transition: opacity 1s ease-out;
	}

	.preloader.fade-out {
		opacity: 0;
		pointer-events: none;
	}

	.preloader__container {
		width: 100%;
		height: 100%;
		display: flex;
		justify-content: center;
		align-items: center;
		padding: 1rem;
		background: rgba(0, 0, 0, 0.3);
	}

	.preloader__image {
		width: min(90vw, 300px);
		height: auto;
		max-width: 100%;
		transition: all 1s ease-out;
		object-fit: contain;
		position: relative;
		aspect-ratio: 1;
		filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.5));
		animation: pulse 2s infinite;
	}

	@keyframes pulse {
		0% {
			transform: scale(1);
			filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.5));
		}
		50% {
			transform: scale(1.05);
			filter: drop-shadow(0 0 20px rgba(255, 0, 0, 0.7));
		}
		100% {
			transform: scale(1);
			filter: drop-shadow(0 0 10px rgba(255, 0, 0, 0.5));
		}
	}

	.preloader.fade-out .preloader__image {
		transform: scale(0.5);
		opacity: 0;
		animation: none;
	}

	@media screen and (min-width: 768px) {
		.preloader__image {
			width: min(80vw, 400px);
		}
	}

	@media screen and (min-width: 1024px) {
		.preloader__image {
			width: min(70vw, 500px);
		}
	}

	@media screen and (min-width: 1440px) {
		.preloader__image {
			width: min(60vw, 600px);
		}
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const preloader = document.getElementById('preloader');
		const content = document.getElementById('content');
		
		if (!preloader || !content) return;

		// Mostrar el contenido
		content.classList.remove('hidden');
		content.classList.add('visible');

		// Manejar el preloader
		setTimeout(() => {
			preloader.classList.add('fade-out');
			setTimeout(() => {
				preloader.style.display = 'none';
			}, 1000);
		}, 7000);
	});
</script> 